import{R as t,r as u}from"./index-SSXOyoI7.js";/* empty css              */import{g as y,T}from"./NotuRender-bVHJs86c.js";const f=({noteTag:e,note:r,notuRenderTools:a,contextSpaceId:s,onDelete:o=null,useUniqueName:c=!1})=>{function i(){if(o)return t.createElement("button",{type:"button",className:"delete",onClick:o})}function l(){return e.tag.color??"#AABBCC"}function d(){return y(l())}function m(){const n=a.noteTagDataComponentResolver(e.tag,r);if(n)return n.getBadgeComponent(e,r,a.notu)}return t.createElement("span",{className:`tag is-small is-unselectable is-rounded mr-1 has-text-weight-normal ${d()}`,style:{backgroundColor:l()}},c?e.tag.getUniqueName(a.notu.cache):e.tag.getQualifiedName(s),m(),i())};f.__docgenInfo={description:"",methods:[],displayName:"NoteTagBadge",props:{noteTag:{required:!0,tsType:{name:"NoteTag"},description:""},note:{required:!0,tsType:{name:"Note"},description:""},notuRenderTools:{required:!0,tsType:{name:"NotuRenderTools"},description:""},contextSpaceId:{required:!0,tsType:{name:"number"},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"null",computed:!1}},useUniqueName:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const E=({component:e})=>e.render();class b{constructor(r,a){this.name=r,this.action=a}}const g=t.forwardRef(({note:e,actions:r},a)=>{const[s,o]=u.useState(!1),c=u.useRef();u.useEffect(()=>(c.current?document.addEventListener("click",i):document.removeEventListener("click",i),()=>document.removeEventListener("click",i)),[c]);function i(n){c.current.contains(n.target)||o(!1)}u.useImperativeHandle(a,()=>({collapse:()=>o(!1)}));function l(){o(!s)}function d(n){n(e),o(!1)}function m(){if(((r==null?void 0:r.length)??0)!=0)return t.createElement("div",{className:`dropdown is-left mr-2 ${s?"is-active":""}`,ref:c},t.createElement("div",{className:"dropdown-trigger"},t.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:l},"•••")),t.createElement("div",{className:"dropdown-menu",role:"menu"},t.createElement("div",{className:"dropdown-content"},r.map(n=>t.createElement("a",{key:n.name,className:"dropdown-item",onClick:()=>d(n.action)},n.name)))))}return m()});g.__docgenInfo={description:"",methods:[{name:"collapse",docblock:null,modifiers:[],params:[],returns:null}],displayName:"NoteActionsViewer",props:{note:{required:!0,tsType:{name:"Note"},description:""},actions:{required:!0,tsType:{name:"Array",elements:[{name:"NoteViewerAction"}],raw:"Array<NoteViewerAction>"},description:""}}};const v=({note:e,notuRenderTools:r,actions:a,isSelected:s,showDate:o=!0})=>{const c=u.useMemo(()=>r.noteTextSplitter(e),[e,e.text]),i=u.useRef();u.useEffect(()=>{s||l()},[s]);function l(){i&&i.current.collapse()}const d=`${e.date.toDateString()} ${e.date.getHours().toString().padStart(2,"0")}:${e.date.getMinutes().toString().padStart(2,"0")}`;function m(){if(o)return t.createElement("p",{className:"is-italic has-text-grey is-inline"},d)}function n(){if(e.ownTag)return t.createElement(T,{tag:e.ownTag,notuRenderTools:r,contextSpaceId:e.space.id})}function N(){if(e.ownTag&&e.tags.length>0)return t.createElement("div",{style:{borderLeft:"2px solid #888",height:"100%"},className:"is-inline mr-2"})}return t.createElement("div",{className:`is-flex is-align-items-center pt-1 pb-1 ${s?"has-background-light":"has-background-white"}`},t.createElement(g,{note:e,actions:a,ref:i}),t.createElement("div",{className:"is-flex-grow-1",onClick:l},m(),c.map((p,w)=>t.createElement(E,{key:w,component:p})),t.createElement("div",null,n()," ",N(),e.tags.map(p=>t.createElement(f,{key:p.tag.id,noteTag:p,note:e,notuRenderTools:r,contextSpaceId:e.space.id})))))};v.__docgenInfo={description:"",methods:[],displayName:"NoteViewer",props:{note:{required:!0,tsType:{name:"Note"},description:""},notuRenderTools:{required:!0,tsType:{name:"NotuRenderTools"},description:""},actions:{required:!0,tsType:{name:"Array",elements:[{name:"NoteViewerAction"}],raw:"Array<NoteViewerAction>"},description:""},isSelected:{required:!0,tsType:{name:"boolean"},description:""},showDate:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{b as N,f as a,v as b};
