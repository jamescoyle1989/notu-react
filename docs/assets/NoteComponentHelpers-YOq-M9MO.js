import{d as u,s as m}from"./StoryHelpers-BgcIDcDq.js";import{M as p}from"./MockHttpClient-CrRj0xgx.js";import{R as o,r as d}from"./index-SSXOyoI7.js";class g{get displayText(){return this._displayText}get originalText(){return this._originalText}constructor(e,t){this._displayText=e,this._originalText=t}render(){if(this._displayText.length!=0)return o.createElement("span",{style:{whiteSpace:"pre-line"}},this._displayText)}getText(){return this._originalText}}class x{get componentShowsInlineInParagraph(){return!0}identify(e){const t=e.indexOf("<Text>");if(t<0)return null;let r=e.indexOf("</Text>",t+1);if(r<0)return null;r+=7;const n=e.substring(t,r);return new u(n,t,this)}create(e,t,r){let n=e.text.replace("<Text>","").replace("</Text>","");return new g(n,e.text)}}class f{get componentShowsInlineInParagraph(){return!0}identify(e){return new u(e,0,this)}create(e,t,r){let n=e.text;const i=n.indexOf(`
`);i>=0&&n.substring(0,i).trim()==""&&(n=n.substring(i+1));const s=n.lastIndexOf(`
`);return s>=0&&n.substring(s).trim()==""&&(n=n.substring(0,s)),new g(n,e.text)}}class T{get lines(){return this._lines}constructor(e,t){this._lines=e,this._save=t}render(){const e=this,[t,r]=d.useState(!1);function n(s,a){const c=s.target.checked;let h=e.lines[a];c&&!h.startsWith("✔")?h="✔ "+h:!c&&h.startsWith("✔")&&(h=h.substring(1).trim()),e._lines[a]=h,r(!t),e._save()}function i(s){return s.startsWith("✔")?s.substring(1).trim():s.trim()}return o.createElement("div",null,this._lines.map((s,a)=>{const c=s.startsWith("✔");return o.createElement("div",{key:a,className:"control"},o.createElement("label",{className:`checkbox ${c?"has-text-grey-light":""}`,style:{textDecoration:c?"line-through":"none"}},o.createElement("input",{type:"checkbox",className:"mr-2",checked:c,onChange:h=>n(h,a)}),i(s)))}))}getText(){return`<Checklist>
${this._lines.join(`
`)}
</Checklist>`}}class k{get componentShowsInlineInParagraph(){return!1}identify(e){const t=e.indexOf("<Checklist>");if(t<0)return null;let r=e.indexOf("</Checklist>",t+1);if(r<0)return null;r+=12;const n=e.substring(t,r);return new u(n,t,this)}create(e,t,r){const n=e.text.replace("<Checklist>","").replace("</Checklist>","").trim().split(`
`);return new T(n,r)}}class w{get paths(){return this._paths}constructor(e){this._paths=e}render(){return o.createElement("div",null,this._paths.map((e,t)=>o.createElement("img",{key:t,src:e,alt:e})))}getText(){return`<Image>
${this._paths.join(`
`)}
</Image>`}}class _{get componentShowsInlineInParagraph(){return!1}identify(e){const t=e.indexOf("<Image>");if(t<0)return null;let r=e.indexOf("</Image>",t+1);if(r<0)return null;r+=8;const n=e.substring(t,r);return new u(n,t,this)}create(e,t,r){const n=e.text.replace("<Image>","").replace("</Image>","").trim().split(`
`);return new w(n)}}class y{get url(){return this._url}get alias(){return this._alias}constructor(e,t){this._url=e,this._alias=t}render(){return o.createElement("a",{href:this.url,target:"_blank"},this.alias??this.url)}getText(){return this.alias?`<Link>(${this.alias}) ${this.url}</Link>`:`<Link>${this.url}</Link>`}}class I{get componentShowsInlineInParagraph(){return!0}identify(e){const t=e.indexOf("<Link>");if(t<0)return null;let r=e.indexOf("</Link>",t+1);if(r<0)return null;r+=7;const n=e.substring(t,r);return new u(n,t,this)}create(e,t,r){const n=e.text.replace("<Link>","").replace("</Link>","").trim(),i=/(?:\((.*?)\))?(.*)/.exec(n),s=i[2];let a=i[1];return a||(a=null),new y(s,a)}}class C{get displayText(){return this._displayText}get fullText(){return this._fullText}constructor(e,t){this._displayText=e,this._fullText=t}render(){return o.createElement("p",null,this.displayText??"")}getText(){return this.fullText}}class b{get componentShowsInlineInParagraph(){return!1}identify(e){const t=e.indexOf("<RandomChoice>");if(t<0)return null;let r=e.indexOf("</RandomChoice>",t+1);if(r<0)return null;r+=15;const n=e.substring(t,r);return new u(n,t,this)}create(e,t,r){const n=e.text.replace("<RandomChoice>","").replace("</RandomChoice>","").trim().split(`
`),i=/(?:(\d+(?:\.\d+)?)\s*x)?(.*)/,s=n.map(a=>{const c=i.exec(a.trim());return{text:c[2].trim(),weight:Number(c[1]??1)}});return new C(this._chooseLine(s),e.text)}_chooseLine(e){const t=e.map(i=>i.weight).reduce((i,s)=>i+s,0),r=Math.random()*t;let n=0;for(const i of e)if(n+=i.weight,r<n)return i.text;return null}}class L{get children(){return this._children}constructor(e){this._children=e}render(){return o.createElement("p",null,this._children.map((e,t)=>o.createElement("span",{key:t},e.render())))}getText(){return this._children.map(e=>e.getText()).join("")}}function E(l){return m(l,new p,[new x,new k,new _,new I,new b],new f,e=>new L(e))}export{E as n};
